import{r as b,o as h,f as B,w as y,b as l,a as o,u as r,n as N,e as $,c as S,F as q,i as M,t as C,T as z,j as Q,Z as R,d as A,g as L,h as G,Q as J,O as K}from"./app-ViCKKgEm.js";import{_ as H}from"./AuthenticatedLayout-CeOHu6B5.js";import{_ as c,a as m}from"./InputLabel-BuqOTnxW.js";import{P as D}from"./PrimaryButton-B9To-CXX.js";import{_ as V}from"./TextInput-BtaZsqWp.js";import{d as F}from"./theme-sugar-BZ7fB8_A.js";import{s as U}from"./multiSelectDarkMode-NDJv9UZn.js";import{L as I}from"./Loading-DRKfj2Tj.js";import{_ as Z,a as W}from"./SecondaryButton-CagAYjRJ.js";const X={class:"p-6 min-h-[500px]"},Y=l("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Procurar CEP ",-1),ee=l("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Seleciona a cidade e digite o nome da rua para procurar o CEP. ",-1),ae={class:"p-6 text-gray-900 dark:text-gray-100"},le={class:"mt-3"},oe={class:"mt-3"},se={class:"flex justify-end gap-2"},re=l("hr",{class:"h-px bg-gray-200 border-0 dark:bg-gray-700 mt-3"},null,-1),te=l("h3",{class:"my-2"},"Lista de CEPs",-1),de={key:0},ne={key:1,class:"max-h-[400px] overflow-auto"},ie=["id","onClick"],ce=["for"],ue=l("br",null,null,-1),me={class:"mt-6 flex justify-end"},pe={__name:"ModalSearchCep",emits:["close","error","success"],setup(w,{emit:n}){const _=n,k=()=>{_("close")},e=["Santos","São Vicente","Praia Grande","Guarujá","Bertioga","Cubatão","Mongaguá","Itanhaém","Peruíbe"],x=b([]),p=b({}),u=b(null),f=b(null),g=b(null),O=F.useToast(),j=()=>{if(p.value={},x.value=[],g.value=null,!u.value||!f.value)!u.value&&!f.value?p.value={cidade:"Selecione uma cidade.",logradouro:"Digite o logradouro."}:u.value?p.value={logradouro:"Digite o logradouro."}:p.value={cidade:"Selecione uma cidade."};else{const E="https://viacep.com.br/ws/SP/"+u.value.replace(" ","%20")+"/"+f.value+"/json/";axios.get(E).then(i=>{const d=i.data;d.length==0?O.error("Ops! Nenhum endereço encontrado!",{position:"top-right",duration:5e3}):x.value=d}).catch(()=>{O.error("Ops! Ocorreu um erro!",{position:"top-right",duration:5e3})})}},P=()=>{_("success",JSON.parse(JSON.stringify(g))),k()};return(E,i)=>(h(),B(W,{show:!0,onClose:k},{default:y(()=>[l("div",X,[Y,ee,l("div",ae,[l("div",le,[o(c,{for:"cidade",value:"Cidade"}),o(r(U),{name:"cidade",id:"cidade","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar cidade","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:e,modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=d=>u.value=d)},null,8,["modelValue"]),o(m,{class:"mt-2",message:p.value.cidade},null,8,["message"])]),l("div",oe,[o(c,{for:"logradouro",value:"Logradouro"}),l("div",se,[o(V,{id:"logradouro",type:"text",class:"mt-1 block w-full",modelValue:f.value,"onUpdate:modelValue":i[1]||(i[1]=d=>f.value=d),placeholder:"Avenida ..."},null,8,["modelValue"]),o(D,{class:N(["mt-1",{"opacity-25":!1}]),disabled:!1,onClick:i[2]||(i[2]=d=>j())},{default:y(()=>[$("procurar ")]),_:1})]),o(m,{class:"mt-2",message:p.value.logradouro},null,8,["message"])]),re,te,x.value.length==0?(h(),S("p",de," Os resultados aparecerão aqui. ")):(h(),S("div",ne,[(h(!0),S(q,null,M(x.value,(d,v)=>(h(),S("div",{class:N(["py-1 my-1 ps-8 pe-4 block min-h-[1.5rem] ps-[1.5rem] rounded",{"bg-white dark:bg-gray-700":v%2==0}]),key:v},[l("input",{class:"relative float-left -ms-[1.5rem] me-1 mt-0.5 h-5 w-5 appearance-none rounded-full border-2 border-solid border-secondary-500 before:pointer-events-none before:absolute before:h-4 before:w-4 before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-checkbox before:shadow-transparent before:content-[''] after:absolute after:z-[1] after:block after:h-4 after:w-4 after:rounded-full after:content-[''] checked:border-primary checked:before:opacity-[0.16] checked:after:absolute checked:after:left-1/2 checked:after:top-1/2 checked:after:h-[0.625rem] checked:after:w-[0.625rem] checked:after:rounded-full checked:after:border-primary checked:after:bg-primary checked:after:content-[''] checked:after:[transform:translate(-50%,-50%)] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-black/60 focus:shadow-none focus:outline-none focus:ring-0 focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-black/60 focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:border-primary checked:focus:before:scale-100 checked:focus:before:shadow-checkbox checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] rtl:float-right dark:border-neutral-400 dark:checked:border-primary",type:"radio",name:"flexRadioDefault",id:v,onClick:T=>g.value=d},null,8,ie),l("label",{class:"mt-px inline-block ps-[0.15rem] hover:cursor-pointer",for:v},[l("strong",null,C(d.cep),1),ue,l("small",null,C(d.logradouro)+C(d.complemento?"("+d.complemento+")":"")+", "+C(d.bairro)+", "+C(d.localidade),1)],8,ce)],2))),128))]))]),l("div",me,[o(Z,{onClick:k},{default:y(()=>[$(" Cancelar ")]),_:1}),o(D,{class:N(["ms-3",{"opacity-25":!g.value}]),disabled:!g.value,onClick:i[3]||(i[3]=d=>P())},{default:y(()=>[$("Selecionar")]),_:1},8,["disabled","class"])])])]),_:1}))}},fe={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},ge={class:"py-6"},ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},be={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},he={class:"p-6 text-gray-900 dark:text-gray-100"},ye={class:"grid grid-cols-1 gap-4"},ke={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},_e={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},xe=l("div",null,[l("hr",{class:"h-px bg-gray-200 border-0 dark:bg-gray-700"}),l("h3",{class:"mt-2"},"Endereço")],-1),Ve={class:"grid grid-cols-1 gap-4",style:{"margin-top":"0"}},we={class:"flex items-center justify-between sm:justify-start mt-4 gap-3"},Ce={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},Se={class:"flex items-center gap-4"},$e={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Te={__name:"Form",props:{celula:{type:Object},lideres:{type:Array,default:[]}},setup(w){const n=w,_=F.useToast(),k={position:"top-right",duration:5e3},e=z({name:n.celula.name??"",lider_id:n.celula.lider_id??"",cep:n.celula.cep??"",uf:n.celula.uf??"",cidade:n.celula.cidade??"",bairro:n.celula.bairro??"",logradouro:n.celula.logradouro??"",numero:n.celula.numero??"",complemento:n.celula.complemento??"",rede:n.celula.rede??"",dia:n.celula.dia??"",hora:n.celula.hora??""}),x=[{name:"Kids",id:"kids"},{name:"Águia",id:"aguia"},{name:"Família",id:"familia"}],p=[{name:"Segunda-feira",id:1},{name:"Terça-feira",id:2},{name:"Quarta-feira",id:3},{name:"Quinta-feira",id:4},{name:"Sexta-feira",id:5},{name:"Sábado",id:6}],u=b(n.lideres.find(t=>t.id===e.lider_id)),f=b(x.find(t=>t.id===e.rede)),g=b(p.find(t=>t.id===e.dia)),O=()=>{e.patch(route("admin.celulas.update",J().props.celula.id),{preserveScroll:!0,onSuccess:()=>P(),onError:()=>{_.error("Ops! Ocorreu um erro!",k)}})},j=()=>{e.post(route("admin.celulas.store"),{preserveScroll:!0,onSuccess:()=>P(!0),onError:()=>{_.error("Ops! Ocorreu um erro!",k)}})},P=(t=!1)=>{t?_.success("Célula criada com sucesso!",k):_.success("Célula atualizada com sucesso!",k),K.reload()},E=()=>{const t=e.cep.replace("-","");console.log(t),t.length==8&&axios.get("https://viacep.com.br/ws/"+t+"/json/").then(a=>{console.log(a);const s=a.data;e.uf=s.uf,e.cidade=s.localidade,e.bairro=s.bairro,e.logradouro=s.logradouro,e.complemento=s.complemento})},i=t=>{const a=t._value;console.log("aqui está: ",a),e.cep=a.cep,e.uf=a.uf,e.cidade=a.localidade,e.bairro=a.bairro,e.logradouro=a.logradouro,e.complemento=a.complemento},d=Q(()=>{var t="";return e.cep.replace("-","").length==8&&(e.logradouro?(t+=e.logradouro+", ",t+=(e.numero||"sn")+", ",t+=e.complemento?e.complemento+", ":"",t+=e.bairro+", ",t+=e.cidade+" - ",t+=e.uf):t="..."),t}),v=b(!1),T=()=>{v.value=!0,console.log("abrindo",v.value)};return(t,a)=>(h(),S(q,null,[o(r(R),{title:w.celula.id?"Editar Célula":"Cadastrar Célula"},null,8,["title"]),o(H,null,{header:y(()=>[l("h2",fe,C(w.celula.id?"Editar":"Cadastrar")+" Célula",1)]),default:y(()=>[l("div",ge,[l("div",ve,[l("div",be,[l("div",he,[l("form",{onSubmit:a[14]||(a[14]=A(s=>w.celula.id?O():j(),["prevent"])),class:"mt-6 space-y-6"},[l("div",ye,[l("div",null,[o(c,{for:"name",value:"Nome"}),o(V,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(e).name,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).name=s),autofocus:"",autocomplete:"name",required:""},null,8,["modelValue"]),o(m,{class:"mt-2",message:r(e).errors.name},null,8,["message"])])]),l("div",ke,[l("div",null,[o(c,{for:"lider",value:"Líder"}),o(r(U),{name:"lider",id:"lider","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Líder","selected-label":"Selecionado",taggable:!0,multiple:!1,"show-labels":!1,options:w.lideres,modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),onSelect:a[2]||(a[2]=s=>r(e).lider_id=u.value.id)},{noOptions:y(()=>[$("Nenhum líder cadastrado no sistema")]),_:1},8,["options","modelValue"]),o(m,{message:r(e).errors.lider_id,class:"mt-2"},null,8,["message"])]),l("div",null,[o(c,{for:"rede",value:"Rede"}),o(r(U),{name:"rede",id:"rede","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Rede","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:x,modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=s=>f.value=s),onSelect:a[4]||(a[4]=s=>r(e).rede=f.value.id)},null,8,["modelValue"]),o(m,{message:r(e).errors.rede,class:"mt-2"},null,8,["message"])])]),l("div",_e,[l("div",null,[o(c,{for:"dia",value:"Dia da Célula"}),o(r(U),{name:"dia",id:"dia","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Dia","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:p,modelValue:g.value,"onUpdate:modelValue":a[5]||(a[5]=s=>g.value=s),onSelect:a[6]||(a[6]=s=>r(e).dia=g.value.id)},null,8,["modelValue"]),o(m,{message:r(e).errors.dia,class:"mt-2"},null,8,["message"])]),l("div",null,[o(c,{for:"hora",value:"Horário da Célula"}),o(V,{id:"hora",type:"time",class:"mt-1 block w-full",modelValue:r(e).hora,"onUpdate:modelValue":a[7]||(a[7]=s=>r(e).hora=s),placeholder:"00:00",required:""},null,8,["modelValue"]),o(m,{class:"mt-2",message:r(e).errors.hora},null,8,["message"])])]),xe,l("div",Ve,[l("div",null,[l("div",we,[o(c,{for:"cep",value:"CEP"}),l("a",{class:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 cursor-pointer",onClick:a[8]||(a[8]=s=>T())},"Não sei o CEP")]),o(V,{id:"cep",type:"text",class:"mt-1 block w-full",modelValue:r(e).cep,"onUpdate:modelValue":a[9]||(a[9]=s=>r(e).cep=s),autocomplete:"cep",placeholder:"00000-000",onKeyup:a[10]||(a[10]=s=>E()),mask:"#####-###",required:""},null,8,["modelValue"]),o(m,{class:"mt-2",message:r(e).errors.cep},null,8,["message"])])]),l("div",Ce,[l("div",null,[o(c,{for:"numero",value:"Número"}),o(V,{id:"numero",type:"text",class:"mt-1 block w-full",modelValue:r(e).numero,"onUpdate:modelValue":a[11]||(a[11]=s=>r(e).numero=s),autocomplete:"numero",placeholder:"000"},null,8,["modelValue"]),o(m,{class:"mt-2",message:r(e).errors.numero},null,8,["message"])]),l("div",null,[o(c,{for:"complemento",value:"Complemento"}),o(V,{id:"complemento",type:"text",class:"mt-1 block w-full",modelValue:r(e).complemento,"onUpdate:modelValue":a[12]||(a[12]=s=>r(e).complemento=s),autocomplete:"complemento"},null,8,["modelValue"]),o(m,{class:"mt-2",message:r(e).errors.complemento},null,8,["message"])])]),l("div",null,[o(c,{for:"endereco",value:"Endereço"}),o(V,{id:"endereco",type:"text",class:"mt-1 block w-full",modelValue:d.value,"onUpdate:modelValue":a[13]||(a[13]=s=>d.value=s),readonly:""},null,8,["modelValue"])]),l("div",Se,[o(D,{class:N({"opacity-25":r(e).processing}),disabled:r(e).processing},{default:y(()=>[$(" Salvar ")]),_:1},8,["class","disabled"]),r(e).processing?(h(),B(I,{key:0})):L("",!0),o(G,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:y(()=>[r(e).recentlySuccessful?(h(),S("p",$e," Salvo.")):L("",!0)]),_:1})])],32)])])])]),v.value?(h(),B(pe,{key:0,onClose:a[15]||(a[15]=s=>v.value=!1),onSuccess:i})):L("",!0)]),_:1})],64))}};export{Te as default};

import{r as f,o as u,f as j,w as y,b as l,d as F,a as o,u as r,n as L,e as S,c as h,F as z,i as A,t as V,j as q,T as G,Q as J,Z as K,k as H,v as I,g as D,h as Z,O as W}from"./app-BCcKGzoT.js";import{_ as X}from"./AuthenticatedLayout-C9v6VfGL.js";import{_ as p}from"./InputError-B4jwTSnx.js";import{_ as c}from"./InputLabel-DB2rKhMY.js";import{P as M}from"./PrimaryButton-C2ZYOE4N.js";import{_ as w}from"./TextInput-DOd9wumI.js";import{d as Q}from"./theme-sugar-cgx8DVsR.js";import{s as B}from"./multiSelectDarkMode-CHTeWuLM.js";import{L as R}from"./Loading-BKnB2oBB.js";import{_ as Y,a as ee}from"./SecondaryButton-DSeqvx4g.js";const ae={class:"p-6 min-h-[500px]"},le=l("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Procurar CEP ",-1),oe=l("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Seleciona a cidade e digite o nome da rua para procurar o CEP. ",-1),se={class:"mt-3"},re={class:"mt-3"},te={class:"flex justify-end gap-2"},de=l("hr",{class:"h-px bg-gray-200 border-0 dark:bg-gray-700 mt-3"},null,-1),ne=l("h3",{class:"my-2"},"Lista de CEPs",-1),ie={key:0,class:"mb-[58px]"},ue={key:0,class:"flex justify-start gap-2"},ce=l("div",null,"Procurando",-1),me={key:1},pe={key:1,class:"max-h-[400px] overflow-auto mb-[58px]"},fe=["id","onClick"],ge=["for"],ve=l("br",null,null,-1),be={class:"mt-6 flex justify-end absolute bottom-6 right-6"},he={__name:"ModalSearchCep",emits:["close","error","success"],setup($,{emit:O}){const n=O,k=()=>{n("close")},C=["Santos","São Vicente","Praia Grande","Guarujá","Bertioga","Cubatão","Mongaguá","Itanhaém","Peruíbe"],e=f([]),_=f({}),x=f(null),g=f(""),v=f(null),m=f(!1),P=Q.useToast(),E=()=>{if(m.value=!0,_.value={},e.value=[],v.value=null,!x.value||!g.value)m.value=!1,x.value||(_.value.cidade="Selecione uma cidade."),g.value||(_.value.logradouro="Digite o logradouro.");else{const N="https://viacep.com.br/ws/SP/"+x.value.replace(" ","%20")+"/"+g.value+"/json/";axios.get(N).then(i=>{const d=i.data;d.length==0?P.error("Ops! Nenhum endereço encontrado!",{position:"top-right",duration:5e3}):e.value=d}).catch(()=>{P.error("Ops! Ocorreu um erro!",{position:"top-right",duration:5e3})}).finally(()=>{m.value=!1})}},U=()=>{n("success",JSON.parse(JSON.stringify(v))),k()};return(N,i)=>(u(),j(ee,{show:!0,onClose:k},{default:y(()=>[l("div",ae,[le,oe,l("form",{onSubmit:i[3]||(i[3]=F(d=>E(),["prevent"])),class:"text-gray-900 dark:text-gray-100"},[l("div",se,[o(c,{for:"cidade",value:"Cidade"}),o(r(B),{name:"cidade",id:"cidade","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar cidade","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:C,modelValue:x.value,"onUpdate:modelValue":i[0]||(i[0]=d=>x.value=d)},null,8,["modelValue"]),o(p,{class:"mt-2",message:_.value.cidade},null,8,["message"])]),l("div",re,[o(c,{for:"logradouro",value:"Logradouro"}),l("div",te,[o(w,{id:"logradouro",type:"text",class:"mt-1 block w-full",modelValue:g.value,"onUpdate:modelValue":i[1]||(i[1]=d=>g.value=d),placeholder:"Avenida ..."},null,8,["modelValue"]),o(M,{class:L(["mt-1",{"opacity-25":m.value}]),disabled:m.value,onClick:i[2]||(i[2]=d=>E())},{default:y(()=>[S("procurar ")]),_:1},8,["disabled","class"])]),o(p,{class:"mt-2",message:_.value.logradouro},null,8,["message"])]),de,ne,e.value.length==0?(u(),h("div",ie,[m.value?(u(),h("div",ue,[ce,S(),o(R)])):(u(),h("div",me," Os resultados aparecerão aqui. "))])):(u(),h("div",pe,[(u(!0),h(z,null,A(e.value,(d,b)=>(u(),h("div",{class:L(["py-2 mb-1 ps-8 pe-4 block min-h-[1.5rem] rounded",{"bg-gray-100 dark:bg-gray-700":b%2==0}]),key:b},[l("input",{class:"relative float-left -ms-[1.5rem] me-1 mt-0.5 h-5 w-5 appearance-none rounded-full border-2 border-solid border-secondary-500 before:pointer-events-none before:absolute before:h-4 before:w-4 before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-checkbox before:shadow-transparent before:content-[''] after:absolute after:z-[1] after:block after:h-4 after:w-4 after:rounded-full after:content-[''] checked:border-primary checked:before:opacity-[0.16] checked:after:absolute checked:after:left-1/2 checked:after:top-1/2 checked:after:h-[0.625rem] checked:after:w-[0.625rem] checked:after:rounded-full checked:after:border-primary checked:after:bg-primary checked:after:content-[''] checked:after:[transform:translate(-50%,-50%)] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-black/60 focus:shadow-none focus:outline-none focus:ring-0 focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-black/60 focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:border-primary checked:focus:before:scale-100 checked:focus:before:shadow-checkbox checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] rtl:float-right dark:border-neutral-400 dark:checked:border-primary",type:"radio",name:"flexRadioDefault",id:b,onClick:T=>v.value=d},null,8,fe),l("label",{class:"mt-px inline-block ps-[0.15rem] hover:cursor-pointer w-full",for:b},[l("strong",null,V(d.cep),1),ve,l("small",null,V(d.logradouro)+V(d.complemento?"("+d.complemento+")":"")+", "+V(d.bairro)+", "+V(d.localidade),1)],8,ge)],2))),128))]))],32),l("div",be,[o(Y,{onClick:k},{default:y(()=>[S(" Cancelar ")]),_:1}),o(M,{class:L(["ms-3",{"opacity-25":!v.value}]),disabled:!v.value,onClick:i[4]||(i[4]=d=>U())},{default:y(()=>[S("Selecionar")]),_:1},8,["disabled","class"])])])]),_:1}))}},ye={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},ke={class:"py-6"},_e={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},xe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},we={class:"p-6 text-gray-900 dark:text-gray-100"},Ve={class:"grid grid-cols-1 gap-4"},$e={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},Ce=["value"],Se={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},Oe=l("div",null,[l("hr",{class:"h-px bg-gray-200 border-0 dark:bg-gray-700"}),l("h3",{class:"mt-2"},"Endereço")],-1),Pe={class:"grid grid-cols-1 gap-4",style:{"margin-top":"0"}},Ee={class:"flex items-center justify-between sm:justify-start mt-4 gap-3"},Ue={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},Ne={class:"flex items-center gap-4"},je={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Ae={__name:"Form",props:{celula:{type:Object},lideres:{type:Array,default:[]}},setup($){const O=q(()=>J().props.auth.user),n=$,k=Q.useToast(),C={position:"top-right",duration:5e3},e=G({name:n.celula.name??"",lider_id:O.value.role=="lider"?O.value.id:n.celula.lider_id,cep:n.celula.cep??"",uf:n.celula.uf??"",cidade:n.celula.cidade??"",bairro:n.celula.bairro??"",logradouro:n.celula.logradouro??"",numero:n.celula.numero??"",complemento:n.celula.complemento??"",rede:n.celula.rede??"",dia:n.celula.dia??"",hora:n.celula.hora??""}),_=[{name:"Kids",id:"kids"},{name:"Águia",id:"aguia"},{name:"Família",id:"familia"}],x=[{name:"Segunda-feira",id:1},{name:"Terça-feira",id:2},{name:"Quarta-feira",id:3},{name:"Quinta-feira",id:4},{name:"Sexta-feira",id:5},{name:"Sábado",id:6}],g=f(n.lideres.find(t=>t.id===e.lider_id)),v=f(_.find(t=>t.id===e.rede)),m=f(x.find(t=>t.id===e.dia)),P=()=>{e.patch(route("lider.celulas.update",n.celula.id),{preserveScroll:!0,onSuccess:()=>U(),onError:()=>{k.error("Ops! Ocorreu um erro!",C)}})},E=()=>{e.post(route("lider.celulas.store"),{preserveScroll:!0,onSuccess:()=>U(!0),onError:()=>{k.error("Ops! Ocorreu um erro!",C)}})},U=(t=!1)=>{t?k.success("Célula criada com sucesso!",C):k.success("Célula atualizada com sucesso!",C),W.reload()},N=()=>{const t=e.cep.replace("-","");console.log(t),t.length==8&&axios.get("https://viacep.com.br/ws/"+t+"/json/").then(a=>{console.log(a);const s=a.data;e.uf=s.uf,e.cidade=s.localidade,e.bairro=s.bairro,e.logradouro=s.logradouro,e.complemento=s.complemento})},i=t=>{const a=t._value;console.log("aqui está: ",a),e.cep=a.cep,e.uf=a.uf,e.cidade=a.localidade,e.bairro=a.bairro,e.logradouro=a.logradouro,e.complemento=a.complemento},d=q(()=>{var t="";return e.cep.replace("-","").length==8&&(e.logradouro?(t+=e.logradouro+", ",t+=(e.numero||"sn")+", ",t+=e.complemento?e.complemento+", ":"",t+=e.bairro+", ",t+=e.cidade+" - ",t+=e.uf):t="..."),t}),b=f(!1),T=()=>{b.value=!0,console.log("abrindo",b.value)};return(t,a)=>(u(),h(z,null,[o(r(K),{title:$.celula.id?"Editar Célula":"Cadastrar Célula"},null,8,["title"]),o(X,null,{header:y(()=>[l("h2",ye,V($.celula.id?"Editar":"Cadastrar")+" Célula",1)]),default:y(()=>[l("div",ke,[l("div",_e,[l("div",xe,[l("div",we,[l("form",{onSubmit:a[15]||(a[15]=F(s=>$.celula.id?P():E(),["prevent"])),class:"mt-6 space-y-6"},[l("div",Ve,[l("div",null,[o(c,{for:"name",value:"Nome"}),o(w,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(e).name,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).name=s),autofocus:"",autocomplete:"name",required:""},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.name},null,8,["message"])])]),l("div",$e,[l("div",null,[o(c,{for:"lider",value:"Líder"}),t.$page.props.auth.user.role=="lider"?H((u(),h("select",{key:0,class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":a[1]||(a[1]=s=>r(e).lider_id=s),disabled:""},[l("option",{value:t.$page.props.auth.user.id,selected:""},V(t.$page.props.auth.user.name),9,Ce)],512)),[[I,r(e).lider_id]]):(u(),j(r(B),{key:1,name:"lider",id:"lider","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Líder","selected-label":"Selecionado",taggable:!0,multiple:!1,"show-labels":!1,options:$.lideres,modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=s=>g.value=s),onSelect:a[3]||(a[3]=s=>r(e).lider_id=g.value.id)},{noOptions:y(()=>[S("Nenhum líder cadastrado no sistema")]),_:1},8,["options","modelValue"])),o(p,{message:r(e).errors.lider_id,class:"mt-2"},null,8,["message"])]),l("div",null,[o(c,{for:"rede",value:"Rede"}),o(r(B),{name:"rede",id:"rede","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Rede","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:_,modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=s=>v.value=s),onSelect:a[5]||(a[5]=s=>r(e).rede=v.value.id)},null,8,["modelValue"]),o(p,{message:r(e).errors.rede,class:"mt-2"},null,8,["message"])])]),l("div",Se,[l("div",null,[o(c,{for:"dia",value:"Dia da Célula"}),o(r(B),{name:"dia",id:"dia","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Dia","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:x,modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=s=>m.value=s),onSelect:a[7]||(a[7]=s=>r(e).dia=m.value.id)},null,8,["modelValue"]),o(p,{message:r(e).errors.dia,class:"mt-2"},null,8,["message"])]),l("div",null,[o(c,{for:"hora",value:"Horário da Célula"}),o(w,{id:"hora",type:"time",class:"mt-1 block w-full",modelValue:r(e).hora,"onUpdate:modelValue":a[8]||(a[8]=s=>r(e).hora=s),placeholder:"00:00",required:""},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.hora},null,8,["message"])])]),Oe,l("div",Pe,[l("div",null,[l("div",Ee,[o(c,{for:"cep",value:"CEP"}),l("a",{class:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 cursor-pointer",onClick:a[9]||(a[9]=s=>T())},"Não sei o CEP")]),o(w,{id:"cep",type:"text",class:"mt-1 block w-full",modelValue:r(e).cep,"onUpdate:modelValue":a[10]||(a[10]=s=>r(e).cep=s),autocomplete:"cep",placeholder:"00000-000",onKeyup:a[11]||(a[11]=s=>N()),mask:"#####-###",required:""},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.cep},null,8,["message"])])]),l("div",Ue,[l("div",null,[o(c,{for:"numero",value:"Número"}),o(w,{id:"numero",type:"text",class:"mt-1 block w-full",modelValue:r(e).numero,"onUpdate:modelValue":a[12]||(a[12]=s=>r(e).numero=s),autocomplete:"numero",placeholder:"000",mask:"#############"},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.numero},null,8,["message"])]),l("div",null,[o(c,{for:"complemento",value:"Complemento"}),o(w,{id:"complemento",type:"text",class:"mt-1 block w-full",modelValue:r(e).complemento,"onUpdate:modelValue":a[13]||(a[13]=s=>r(e).complemento=s),autocomplete:"complemento"},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.complemento},null,8,["message"])])]),l("div",null,[o(c,{for:"endereco",value:"Endereço"}),o(w,{id:"endereco",type:"text",class:"mt-1 block w-full",modelValue:d.value,"onUpdate:modelValue":a[14]||(a[14]=s=>d.value=s),readonly:""},null,8,["modelValue"])]),l("div",Ne,[o(M,{class:L({"opacity-25":r(e).processing}),disabled:r(e).processing},{default:y(()=>[S(" Salvar ")]),_:1},8,["class","disabled"]),r(e).processing?(u(),j(R,{key:0})):D("",!0),o(Z,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:y(()=>[r(e).recentlySuccessful?(u(),h("p",je," Salvo.")):D("",!0)]),_:1})])],32)])])])]),b.value?(u(),j(he,{key:0,onClose:a[16]||(a[16]=s=>b.value=!1),onSuccess:i})):D("",!0)]),_:1})],64))}};export{Ae as default};

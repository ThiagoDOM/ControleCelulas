import{r as f,o as u,f as D,w as h,b as l,d as q,a as o,u as r,n as U,e as O,c as _,F,i as Q,t as $,T as R,j as A,Z as G,g as B,h as J,Q as K,O as H}from"./app-Br3P4AHF.js";import{_ as I}from"./AuthenticatedLayout-xr-h-KDW.js";import{_ as c,a as p}from"./InputLabel-B6AZEonA.js";import{P as T}from"./PrimaryButton-OJJd4A3C.js";import{_ as w}from"./TextInput-Dbn93Su7.js";import{d as M}from"./theme-sugar-CKJvLlpP.js";import{s as j}from"./multiSelectDarkMode-DqCU4FjN.js";import{L as z}from"./Loading-dZGksdQH.js";import{_ as Z,a as W}from"./SecondaryButton-CF5-B_Qe.js";const X={class:"p-6 min-h-[500px]"},Y=l("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Procurar CEP ",-1),ee=l("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Seleciona a cidade e digite o nome da rua para procurar o CEP. ",-1),ae={class:"mt-3"},le={class:"mt-3"},oe={class:"flex justify-end gap-2"},se=l("hr",{class:"h-px bg-gray-200 border-0 dark:bg-gray-700 mt-3"},null,-1),re=l("h3",{class:"my-2"},"Lista de CEPs",-1),te={key:0,class:"mb-[58px]"},de={key:0,class:"flex justify-start gap-2"},ne=l("div",null,"Procurando",-1),ie={key:1},ce={key:1,class:"max-h-[400px] overflow-auto mb-[58px]"},ue=["id","onClick"],me=["for"],pe=l("br",null,null,-1),fe={class:"mt-6 flex justify-end absolute bottom-6 right-6"},ge={__name:"ModalSearchCep",emits:["close","error","success"],setup(C,{emit:n}){const x=n,y=()=>{x("close")},e=["Santos","São Vicente","Praia Grande","Guarujá","Bertioga","Cubatão","Mongaguá","Itanhaém","Peruíbe"],V=f([]),g=f({}),m=f(null),v=f(null),b=f(null),k=f(!1),E=M.useToast(),P=()=>{if(k.value=!0,g.value={},V.value=[],b.value=null,!m.value||!v.value)k.value=!1,!m.value&&!v.value?g.value={cidade:"Selecione uma cidade.",logradouro:"Digite o logradouro."}:m.value?g.value={logradouro:"Digite o logradouro."}:g.value={cidade:"Selecione uma cidade."};else{const N="https://viacep.com.br/ws/SP/"+m.value.replace(" ","%20")+"/"+v.value+"/json/";axios.get(N).then(i=>{const d=i.data;d.length==0?E.error("Ops! Nenhum endereço encontrado!",{position:"top-right",duration:5e3}):V.value=d}).catch(()=>{E.error("Ops! Ocorreu um erro!",{position:"top-right",duration:5e3})}).finally(()=>{k.value=!1})}},L=()=>{x("success",JSON.parse(JSON.stringify(b))),y()};return(N,i)=>(u(),D(W,{show:!0,onClose:y},{default:h(()=>[l("div",X,[Y,ee,l("form",{onSubmit:i[3]||(i[3]=q(d=>P(),["prevent"])),class:"text-gray-900 dark:text-gray-100"},[l("div",ae,[o(c,{for:"cidade",value:"Cidade"}),o(r(j),{name:"cidade",id:"cidade","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar cidade","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:e,modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=d=>m.value=d)},null,8,["modelValue"]),o(p,{class:"mt-2",message:g.value.cidade},null,8,["message"])]),l("div",le,[o(c,{for:"logradouro",value:"Logradouro"}),l("div",oe,[o(w,{id:"logradouro",type:"text",class:"mt-1 block w-full",modelValue:v.value,"onUpdate:modelValue":i[1]||(i[1]=d=>v.value=d),placeholder:"Avenida ..."},null,8,["modelValue"]),o(T,{class:U(["mt-1",{"opacity-25":k.value}]),disabled:k.value,onClick:i[2]||(i[2]=d=>P())},{default:h(()=>[O("procurar ")]),_:1},8,["disabled","class"])]),o(p,{class:"mt-2",message:g.value.logradouro},null,8,["message"])]),se,re,V.value.length==0?(u(),_("div",te,[k.value?(u(),_("div",de,[ne,O(),o(z)])):(u(),_("div",ie," Os resultados aparecerão aqui. "))])):(u(),_("div",ce,[(u(!0),_(F,null,Q(V.value,(d,S)=>(u(),_("div",{class:U(["py-2 mb-1 ps-8 pe-4 block min-h-[1.5rem] rounded",{"bg-gray-100 dark:bg-gray-700":S%2==0}]),key:S},[l("input",{class:"relative float-left -ms-[1.5rem] me-1 mt-0.5 h-5 w-5 appearance-none rounded-full border-2 border-solid border-secondary-500 before:pointer-events-none before:absolute before:h-4 before:w-4 before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-checkbox before:shadow-transparent before:content-[''] after:absolute after:z-[1] after:block after:h-4 after:w-4 after:rounded-full after:content-[''] checked:border-primary checked:before:opacity-[0.16] checked:after:absolute checked:after:left-1/2 checked:after:top-1/2 checked:after:h-[0.625rem] checked:after:w-[0.625rem] checked:after:rounded-full checked:after:border-primary checked:after:bg-primary checked:after:content-[''] checked:after:[transform:translate(-50%,-50%)] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-black/60 focus:shadow-none focus:outline-none focus:ring-0 focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-black/60 focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:border-primary checked:focus:before:scale-100 checked:focus:before:shadow-checkbox checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] rtl:float-right dark:border-neutral-400 dark:checked:border-primary",type:"radio",name:"flexRadioDefault",id:S,onClick:t=>b.value=d},null,8,ue),l("label",{class:"mt-px inline-block ps-[0.15rem] hover:cursor-pointer w-full",for:S},[l("strong",null,$(d.cep),1),pe,l("small",null,$(d.logradouro)+$(d.complemento?"("+d.complemento+")":"")+", "+$(d.bairro)+", "+$(d.localidade),1)],8,me)],2))),128))]))],32),l("div",fe,[o(Z,{onClick:y},{default:h(()=>[O(" Cancelar ")]),_:1}),o(T,{class:U(["ms-3",{"opacity-25":!b.value}]),disabled:!b.value,onClick:i[4]||(i[4]=d=>L())},{default:h(()=>[O("Selecionar")]),_:1},8,["disabled","class"])])])]),_:1}))}},ve={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},be={class:"py-6"},he={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ye={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ke={class:"p-6 text-gray-900 dark:text-gray-100"},_e={class:"grid grid-cols-1 gap-4"},xe={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},Ve={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},we=l("div",null,[l("hr",{class:"h-px bg-gray-200 border-0 dark:bg-gray-700"}),l("h3",{class:"mt-2"},"Endereço")],-1),Ce={class:"grid grid-cols-1 gap-4",style:{"margin-top":"0"}},Se={class:"flex items-center justify-between sm:justify-start mt-4 gap-3"},$e={class:"grid sm:grid-cols-2 grid-cols-1 gap-4"},Oe={class:"flex items-center gap-4"},Pe={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Fe={__name:"Form",props:{celula:{type:Object},lideres:{type:Array,default:[]}},setup(C){const n=C,x=M.useToast(),y={position:"top-right",duration:5e3},e=R({name:n.celula.name??"",lider_id:n.celula.lider_id??"",cep:n.celula.cep??"",uf:n.celula.uf??"",cidade:n.celula.cidade??"",bairro:n.celula.bairro??"",logradouro:n.celula.logradouro??"",numero:n.celula.numero??"",complemento:n.celula.complemento??"",rede:n.celula.rede??"",dia:n.celula.dia??"",hora:n.celula.hora??""}),V=[{name:"Kids",id:"kids"},{name:"Águia",id:"aguia"},{name:"Família",id:"familia"}],g=[{name:"Segunda-feira",id:1},{name:"Terça-feira",id:2},{name:"Quarta-feira",id:3},{name:"Quinta-feira",id:4},{name:"Sexta-feira",id:5},{name:"Sábado",id:6}],m=f(n.lideres.find(t=>t.id===e.lider_id)),v=f(V.find(t=>t.id===e.rede)),b=f(g.find(t=>t.id===e.dia)),k=()=>{e.patch(route("admin.celulas.update",K().props.celula.id),{preserveScroll:!0,onSuccess:()=>P(),onError:()=>{x.error("Ops! Ocorreu um erro!",y)}})},E=()=>{e.post(route("admin.celulas.store"),{preserveScroll:!0,onSuccess:()=>P(!0),onError:()=>{x.error("Ops! Ocorreu um erro!",y)}})},P=(t=!1)=>{t?x.success("Célula criada com sucesso!",y):x.success("Célula atualizada com sucesso!",y),H.reload()},L=()=>{const t=e.cep.replace("-","");console.log(t),t.length==8&&axios.get("https://viacep.com.br/ws/"+t+"/json/").then(a=>{console.log(a);const s=a.data;e.uf=s.uf,e.cidade=s.localidade,e.bairro=s.bairro,e.logradouro=s.logradouro,e.complemento=s.complemento})},N=t=>{const a=t._value;console.log("aqui está: ",a),e.cep=a.cep,e.uf=a.uf,e.cidade=a.localidade,e.bairro=a.bairro,e.logradouro=a.logradouro,e.complemento=a.complemento},i=A(()=>{var t="";return e.cep.replace("-","").length==8&&(e.logradouro?(t+=e.logradouro+", ",t+=(e.numero||"sn")+", ",t+=e.complemento?e.complemento+", ":"",t+=e.bairro+", ",t+=e.cidade+" - ",t+=e.uf):t="..."),t}),d=f(!1),S=()=>{d.value=!0,console.log("abrindo",d.value)};return(t,a)=>(u(),_(F,null,[o(r(G),{title:C.celula.id?"Editar Célula":"Cadastrar Célula"},null,8,["title"]),o(I,null,{header:h(()=>[l("h2",ve,$(C.celula.id?"Editar":"Cadastrar")+" Célula",1)]),default:h(()=>[l("div",be,[l("div",he,[l("div",ye,[l("div",ke,[l("form",{onSubmit:a[14]||(a[14]=q(s=>C.celula.id?k():E(),["prevent"])),class:"mt-6 space-y-6"},[l("div",_e,[l("div",null,[o(c,{for:"name",value:"Nome"}),o(w,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(e).name,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).name=s),autofocus:"",autocomplete:"name",required:""},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.name},null,8,["message"])])]),l("div",xe,[l("div",null,[o(c,{for:"lider",value:"Líder"}),o(r(j),{name:"lider",id:"lider","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Líder","selected-label":"Selecionado",taggable:!0,multiple:!1,"show-labels":!1,options:C.lideres,modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=s=>m.value=s),onSelect:a[2]||(a[2]=s=>r(e).lider_id=m.value.id)},{noOptions:h(()=>[O("Nenhum líder cadastrado no sistema")]),_:1},8,["options","modelValue"]),o(p,{message:r(e).errors.lider_id,class:"mt-2"},null,8,["message"])]),l("div",null,[o(c,{for:"rede",value:"Rede"}),o(r(j),{name:"rede",id:"rede","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Rede","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:V,modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=s=>v.value=s),onSelect:a[4]||(a[4]=s=>r(e).rede=v.value.id)},null,8,["modelValue"]),o(p,{message:r(e).errors.rede,class:"mt-2"},null,8,["message"])])]),l("div",Ve,[l("div",null,[o(c,{for:"dia",value:"Dia da Célula"}),o(r(j),{name:"dia",id:"dia","track-by":"name",label:"name","select-label":"","deselect-label":"",tagPlaceholder:"",placeholder:"Selecionar Dia","selected-label":"Selecionado",taggable:!1,multiple:!1,"show-labels":!1,options:g,modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=s=>b.value=s),onSelect:a[6]||(a[6]=s=>r(e).dia=b.value.id)},null,8,["modelValue"]),o(p,{message:r(e).errors.dia,class:"mt-2"},null,8,["message"])]),l("div",null,[o(c,{for:"hora",value:"Horário da Célula"}),o(w,{id:"hora",type:"time",class:"mt-1 block w-full",modelValue:r(e).hora,"onUpdate:modelValue":a[7]||(a[7]=s=>r(e).hora=s),placeholder:"00:00",required:""},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.hora},null,8,["message"])])]),we,l("div",Ce,[l("div",null,[l("div",Se,[o(c,{for:"cep",value:"CEP"}),l("a",{class:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 cursor-pointer",onClick:a[8]||(a[8]=s=>S())},"Não sei o CEP")]),o(w,{id:"cep",type:"text",class:"mt-1 block w-full",modelValue:r(e).cep,"onUpdate:modelValue":a[9]||(a[9]=s=>r(e).cep=s),autocomplete:"cep",placeholder:"00000-000",onKeyup:a[10]||(a[10]=s=>L()),mask:"#####-###",required:""},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.cep},null,8,["message"])])]),l("div",$e,[l("div",null,[o(c,{for:"numero",value:"Número"}),o(w,{id:"numero",type:"text",class:"mt-1 block w-full",modelValue:r(e).numero,"onUpdate:modelValue":a[11]||(a[11]=s=>r(e).numero=s),autocomplete:"numero",placeholder:"000",mask:"#############"},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.numero},null,8,["message"])]),l("div",null,[o(c,{for:"complemento",value:"Complemento"}),o(w,{id:"complemento",type:"text",class:"mt-1 block w-full",modelValue:r(e).complemento,"onUpdate:modelValue":a[12]||(a[12]=s=>r(e).complemento=s),autocomplete:"complemento"},null,8,["modelValue"]),o(p,{class:"mt-2",message:r(e).errors.complemento},null,8,["message"])])]),l("div",null,[o(c,{for:"endereco",value:"Endereço"}),o(w,{id:"endereco",type:"text",class:"mt-1 block w-full",modelValue:i.value,"onUpdate:modelValue":a[13]||(a[13]=s=>i.value=s),readonly:""},null,8,["modelValue"])]),l("div",Oe,[o(T,{class:U({"opacity-25":r(e).processing}),disabled:r(e).processing},{default:h(()=>[O(" Salvar ")]),_:1},8,["class","disabled"]),r(e).processing?(u(),D(z,{key:0})):B("",!0),o(J,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:h(()=>[r(e).recentlySuccessful?(u(),_("p",Pe," Salvo.")):B("",!0)]),_:1})])],32)])])])]),d.value?(u(),D(ge,{key:0,onClose:a[15]||(a[15]=s=>d.value=!1),onSuccess:N})):B("",!0)]),_:1})],64))}};export{Fe as default};

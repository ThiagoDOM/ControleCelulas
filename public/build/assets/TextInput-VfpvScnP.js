import{r as S,aL as P,bG as W,u as L,o as j,c as x}from"./app-v4vOqA19.js";/*! maska v2.1.11 | (c) Alexander Shabunevich | Released under the MIT license */var C=Object.defineProperty,J=(a,t,e)=>t in a?C(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,g=(a,t,e)=>(J(a,typeof t!="symbol"?t+"":t,e),e);const b={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class R{constructor(t={}){g(this,"opts",{}),g(this,"memo",new Map);const e={...t};if(e.tokens!=null){e.tokens=e.tokensReplace?{...e.tokens}:{...b,...e.tokens};for(const s of Object.values(e.tokens))typeof s.pattern=="string"&&(s.pattern=new RegExp(s.pattern))}else e.tokens=b;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort((s,n)=>s.length-n.length):e.mask=e.mask[0]??""),e.mask===""&&(e.mask=null),this.opts=e}masked(t){return this.process(t,this.findMask(t))}unmasked(t){return this.process(t,this.findMask(t),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const e=this.findMask(t);if(this.opts.mask==null||e==null)return!1;const s=this.process(t,e).length;return typeof this.opts.mask=="string"?s>=this.opts.mask.length:typeof this.opts.mask=="function"?s>=e.length:this.opts.mask.filter(n=>s>=n.length).length===this.opts.mask.length}findMask(t){const e=this.opts.mask;if(e==null)return null;if(typeof e=="string")return e;if(typeof e=="function")return e(t);const s=this.process(t,e.slice(-1).pop()??"",!1);return e.find(n=>this.process(t,n,!1).length>=s.length)??""}escapeMask(t){const e=[],s=[];return t.split("").forEach((n,i)=>{n==="!"&&t[i-1]!=="!"?s.push(i-s.length):e.push(n)}),{mask:e.join(""),escaped:s}}process(t,e,s=!0){if(e==null)return t;const n=`value=${t},mask=${e},masked=${s?1:0}`;if(this.memo.has(n))return this.memo.get(n);const{mask:i,escaped:u}=this.escapeMask(e),o=[],m=this.opts.tokens!=null?this.opts.tokens:{},l=this.isReversed()?-1:1,k=this.isReversed()?"unshift":"push",h=this.isReversed()?0:i.length-1,V=this.isReversed()?()=>r>-1&&p>-1:()=>r<i.length&&p<t.length,T=c=>!this.isReversed()&&c<=h||this.isReversed()&&c>=h;let y,f=-1,r=this.isReversed()?i.length-1:0,p=this.isReversed()?t.length-1:0,E=!1;for(;V();){const c=i.charAt(r),d=m[c],v=(d==null?void 0:d.transform)!=null?d.transform(t.charAt(p)):t.charAt(p);if(!u.includes(r)&&d!=null?(v.match(d.pattern)!=null?(o[k](v),d.repeated?(f===-1?f=r:r===h&&r!==f&&(r=f-l),h===f&&(r-=l)):d.multiple&&(E=!0,r-=l),r+=l):d.multiple?E&&(r+=l,p-=l,E=!1):v===y?y=void 0:d.optional&&(r+=l,p-=l),p+=l):(s&&!this.isEager()&&o[k](c),v===c&&!this.isEager()?p+=l:y=c,this.isEager()||(r+=l)),this.isEager())for(;T(r)&&(m[i.charAt(r)]==null||u.includes(r));)s?o[k](i.charAt(r)):i.charAt(r)===t.charAt(p)&&(p+=l),r+=l}return this.memo.set(n,o.join("")),this.memo.get(n)}}const O=a=>JSON.parse(a.replaceAll("'",'"')),w=(a,t={})=>{const e={...t};return a.dataset.maska!=null&&a.dataset.maska!==""&&(e.mask=_(a.dataset.maska)),a.dataset.maskaEager!=null&&(e.eager=M(a.dataset.maskaEager)),a.dataset.maskaReversed!=null&&(e.reversed=M(a.dataset.maskaReversed)),a.dataset.maskaTokensReplace!=null&&(e.tokensReplace=M(a.dataset.maskaTokensReplace)),a.dataset.maskaTokens!=null&&(e.tokens=q(a.dataset.maskaTokens)),e},M=a=>a!==""?!!JSON.parse(a):!0,_=a=>a.startsWith("[")&&a.endsWith("]")?O(a):a,q=a=>{if(a.startsWith("{")&&a.endsWith("}"))return O(a);const t={};return a.split("|").forEach(e=>{const s=e.split(":");t[s[0]]={pattern:new RegExp(s[1]),optional:s[2]==="optional",multiple:s[2]==="multiple",repeated:s[2]==="repeated"}}),t};class N{constructor(t,e={}){g(this,"items",new Map),g(this,"beforeinputEvent",s=>{const n=s.target,i=this.items.get(n);i.isEager()&&"inputType"in s&&s.inputType.startsWith("delete")&&i.unmasked(n.value).length<=1&&this.setMaskedValue(n,"")}),g(this,"inputEvent",s=>{if(s instanceof CustomEvent&&s.type==="input"&&s.detail!=null&&typeof s.detail=="object"&&"masked"in s.detail)return;const n=s.target,i=this.items.get(n),u=n.value,o=n.selectionStart,m=n.selectionEnd;let l=u;if(i.isEager()){const k=i.masked(u),h=i.unmasked(u);h===""&&"data"in s&&s.data!=null?l=s.data:h!==i.unmasked(k)&&(l=h)}if(this.setMaskedValue(n,l),"inputType"in s&&(s.inputType.startsWith("delete")||o!=null&&o<u.length))try{n.setSelectionRange(o,m)}catch{}}),this.options=e,typeof t=="string"?this.init(Array.from(document.querySelectorAll(t)),this.getMaskOpts(e)):this.init("length"in t?Array.from(t):[t],this.getMaskOpts(e))}destroy(){for(const t of this.items.keys())t.removeEventListener("input",this.inputEvent),t.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(t,e){const s=this.items.get(t),n=new R(w(t,this.getMaskOpts(e)));return JSON.stringify(s.opts)!==JSON.stringify(n.opts)}needUpdateValue(t){const e=t.dataset.maskaValue;return e==null&&t.value!==""||e!=null&&e!==t.value}getMaskOpts(t){const{onMaska:e,preProcess:s,postProcess:n,...i}=t;return i}init(t,e){for(const s of t){const n=new R(w(s,e));this.items.set(s,n),s.value!==""&&this.setMaskedValue(s,s.value),s.addEventListener("input",this.inputEvent),s.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(t,e){const s=this.items.get(t);this.options.preProcess!=null&&(e=this.options.preProcess(e));const n=s.masked(e),i=s.unmasked(s.isEager()?n:e),u=s.completed(e),o={masked:n,unmasked:i,completed:u};e=n,this.options.postProcess!=null&&(e=this.options.postProcess(e)),t.value=e,t.dataset.maskaValue=e,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(m=>m(o)):this.options.onMaska(o)),t.dispatchEvent(new CustomEvent("maska",{detail:o})),t.dispatchEvent(new CustomEvent("input",{detail:o}))}}const A=new WeakMap,U=a=>{setTimeout(()=>{var t;((t=A.get(a))==null?void 0:t.needUpdateValue(a))===!0&&a.dispatchEvent(new CustomEvent("input"))})},$=(a,t)=>{const e=a instanceof HTMLInputElement?a:a.querySelector("input"),s={...t.arg};if(e==null||(e==null?void 0:e.type)==="file")return;U(e);const n=A.get(e);if(n!=null){if(!n.needUpdateOptions(e,s))return;n.destroy()}if(t.value!=null){const i=t.value,u=o=>{i.masked=o.masked,i.unmasked=o.unmasked,i.completed=o.completed};s.onMaska=s.onMaska==null?u:Array.isArray(s.onMaska)?[...s.onMaska,u]:[s.onMaska,u]}A.set(e,new N(e,s))},I=["value","data-maska"],B={__name:"TextInput",props:{modelValue:{type:String,required:!0},mask:{type:String,default:null,required:!1}},emits:["update:modelValue"],setup(a,{expose:t}){const e=S(null);return P(()=>{e.value.hasAttribute("autofocus")&&e.value.focus()}),t({focus:()=>e.value.focus()}),(s,n)=>W((j(),x("input",{class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:a.modelValue,onInput:n[0]||(n[0]=i=>s.$emit("update:modelValue",i.target.value)),ref_key:"input",ref:e,"data-maska":a.mask},null,40,I)),[[L($)]])}};export{B as _};
